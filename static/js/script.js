var Segment = React.createClass({
  handleClick: function() {
    this.props.openModal(this.props.data.text, this.props.data.id);
  },
  render: function() {
    return (
      <g className={"segment " + this.props.data.text}>
        <path
          onClick={this.handleClick}
          d={this.props.data.d}/>
        <text
          x={this.props.data.position.x}
          y={this.props.data.position.y}
          onClick={this.handleClick}
          className="label">{this.props.data.text}</text>
      </g>
    );
  }
});

var Phase = React.createClass({
  render: function() {
    return (
      <g>
        <g className={"circle " + this.props.id}>
          {this.props.segments.map(function(result) {
            return (
              <Segment
                openModal={this.props.openModal}
                key={result.id}
                data={result} />
            );
          }.bind(this))}
        </g>
        <g className="title">
          {this.props.title.paths.map(function(path, idx) {
            return <path key={idx} d={path} />
          })}
        </g>
      </g>
    )
  }
});

var Checkpoint = React.createClass({
  render: function() {
    return (
      <g className="checkpoint">
        <polygon
          className={this.props.checkpoint.id}
          points={this.props.checkpoint.points} />
        <g className="title">
          {this.props.checkpoint.title.paths.map(function(path, idx) {
            return <path key={idx} d={path} />
          })}
        </g>
      </g>
    );
  }
})

var DesignRoadmapSvg = React.createClass({
  render: function() {
    var phases = [
      {
        id: "understand",
        title: {
          text: "understand",
          paths: [
            "M37.1,20.7c0.5,1.3,1,3,0.2,5c-0.8,1.9-2.3,2.8-3.8,3.5c-1.5,0.7-3.1,1.2-5.1,0.6c-2.1-0.7-3-2.1-3.7-3.4 c-1.6-3.1-2.4-4.6-3.9-7.7c1.4-0.7,2.1-1.1,3.5-1.7c1.5,3.1,2.2,4.7,3.7,7.8c0.3,0.6,0.8,1.5,1.8,1.9c0.9,0.3,1.7,0.1,2.3-0.2 c0.6-0.3,1.4-0.8,1.7-1.6c0.4-1,0-2-0.2-2.6c-1.4-3.2-2.1-4.7-3.4-7.9c1.4-0.6,2.2-0.9,3.6-1.5C35.1,15.9,35.8,17.5,37.1,20.7z",
            "M42.5,25c-2.1-5.5-3.1-8.2-5.2-13.7c1.3-0.5,1.9-0.7,3.2-1.2c4.7,2.3,7,3.6,11.4,6.2c-1.1-3.6-1.6-5.4-2.7-9.1 c1.5-0.4,2.2-0.7,3.7-1.1c1.5,5.7,2.3,8.5,3.9,14.2c-1.2,0.3-1.8,0.5-3,0.8c-4.3-2.7-6.5-4-11.1-6.4c1.3,3.6,1.9,5.4,3.2,9 C44.5,24.3,43.8,24.5,42.5,25z",
            "M61.5,4.1c2.1-0.5,4.5-0.6,6.8,0.7c1.6,1,2.8,2.5,3.2,4.8c0.4,2.3-0.2,4.1-1.2,5.5c-1.7,2.4-4.3,3-5.5,3.3 c-1.9,0.4-2.9,0.6-4.8,1.1c-1.4-5.7-2.1-8.5-3.6-14.2C58.4,4.8,59.4,4.6,61.5,4.1z M62.7,16c0.4-0.1,0.6-0.1,0.9-0.2 c0.7-0.2,2.3-0.6,3.3-1.7c0.7-0.8,1.1-2.2,0.8-3.8c-0.3-1.6-1.2-2.4-1.9-2.9c-1.4-0.8-3-0.7-4.1-0.4c-0.4,0.1-0.6,0.1-1,0.2 C61.5,10.7,61.9,12.5,62.7,16z",
            "M82.7,3.8c-2.2,0.2-3.3,0.3-5.4,0.6c0.1,1.1,0.2,1.7,0.3,2.8c2-0.2,3-0.4,5.1-0.5c0.1,1.1,0.2,1.7,0.3,2.8 c-2,0.2-3,0.3-5,0.5c0.2,1.3,0.2,1.9,0.4,3.2c2-0.2,3.1-0.4,5.1-0.5c0.1,1.1,0.1,1.7,0.2,2.8c-3.4,0.3-5.1,0.5-8.5,1 C74.4,10.8,74,7.9,73.1,2c3.7-0.5,5.6-0.7,9.3-1.1C82.5,2.1,82.6,2.7,82.7,3.8z",
            "M91.4,0.4c2.1-0.1,3.4,0.5,4.2,1.2C96.3,2.2,97,3.3,97,4.9c0,0.9-0.2,2.1-1.2,3c-0.5,0.5-1.3,0.9-2.2,1.2 c2,2.4,2.9,3.6,4.8,6c-1.7,0-2.6,0-4.3,0c-1.7-2.3-2.5-3.4-4.3-5.6c0.1,2.3,0.2,3.5,0.3,5.8c-1.4,0.1-2.1,0.1-3.5,0.2 c-0.4-5.9-0.6-8.8-1-14.6C87.9,0.6,89,0.5,91.4,0.4z M89.7,7.2c0.3,0,0.5,0,0.8,0c0.7,0,1.6-0.1,2.2-0.7c0.3-0.2,0.6-0.7,0.6-1.4 c0-0.8-0.5-1.3-0.8-1.5c-0.6-0.4-1.6-0.4-2.1-0.4c-0.4,0-0.5,0-0.9,0C89.6,4.8,89.6,5.6,89.7,7.2z",
            "M108.9,4.3c-1.1-1.1-2.2-1.2-2.7-1.2c-0.5,0-1.2,0-1.6,0.4c-0.3,0.2-0.4,0.5-0.5,0.9c0,0.4,0.1,0.6,0.3,0.8 c0.4,0.3,0.9,0.5,2,0.9c0.5,0.2,0.7,0.3,1.2,0.5c0.7,0.3,1.5,0.7,2.1,1.3c0.9,0.9,1,2,0.9,2.8c-0.1,1.5-0.8,2.8-1.7,3.5 c-1.5,1.3-3.4,1.3-4.4,1.2c-1.1-0.1-2-0.2-3-0.7c-0.8-0.4-1.6-1.1-2.2-1.7c0.7-1,1.1-1.4,1.9-2.4c0.4,0.4,1,0.9,1.4,1.2 c0.6,0.4,1.2,0.6,1.9,0.6c0.5,0,1.1,0,1.6-0.4c0.3-0.2,0.6-0.6,0.6-1.2c0-0.5-0.2-0.8-0.5-1.1c-0.4-0.4-1.4-0.7-1.8-0.9 c-0.5-0.2-0.8-0.3-1.3-0.5c-0.7-0.3-1.6-0.6-2.2-1.2c-0.8-0.8-0.9-1.9-0.9-2.6c0-1.3,0.5-2.4,1.5-3.3c1.2-1,2.6-1.3,4.1-1.2 c1.1,0.1,3,0.4,4.8,1.8C110,2.9,109.6,3.4,108.9,4.3z",
            "M119.7,4.7c-0.6,4.7-1,7-1.6,11.7c-1.4-0.2-2.1-0.3-3.5-0.4c0.5-4.7,0.8-7,1.4-11.7c-1.4-0.2-2.1-0.2-3.5-0.4 c0.1-1.1,0.2-1.7,0.3-2.8c4.4,0.4,6.6,0.7,11,1.4c-0.2,1.1-0.3,1.7-0.5,2.8C121.8,5,121.1,4.9,119.7,4.7z",
            "M131.6,16.1c-2.3-0.5-3.4-0.8-5.7-1.2c-0.7,1-1,1.5-1.7,2.5c-1.4-0.3-2.2-0.4-3.6-0.6c3.3-5.4,5.1-8.1,8.9-13.3 c1.4,0.3,2.1,0.4,3.4,0.7c1.3,6.3,1.9,9.4,2.7,15.7c-1.4-0.4-2.1-0.5-3.5-0.9C131.9,17.9,131.8,17.3,131.6,16.1z M131.2,13.4 c-0.3-2.1-0.5-3.1-0.9-5.2c-1.2,1.8-1.8,2.7-2.9,4.4C128.9,12.9,129.6,13,131.2,13.4z",
            "M137.3,20.4c1.5-5.7,2.3-8.5,3.9-14.2c1.3,0.4,1.9,0.5,3.2,0.9c2.4,4.7,3.5,7,5.5,11.7c1.3-3.6,1.9-5.4,3.2-8.9 c1.5,0.5,2.2,0.8,3.6,1.3c-2.1,5.5-3.1,8.2-5.2,13.7c-1.2-0.4-1.7-0.7-2.9-1.1c-1.9-4.7-2.9-7-5.2-11.7c-1.1,3.6-1.6,5.5-2.7,9.1 C139.3,20.9,138.6,20.7,137.3,20.4z",
            "M165,14.7c2,0.9,4.1,2.2,5.2,4.6c0.8,1.8,0.8,3.7-0.2,5.8c-1,2.1-2.6,3.2-4.3,3.7c-2.9,0.9-5.3-0.1-6.5-0.6 c-1.8-0.8-2.8-1.2-4.6-2c2.2-5.4,3.3-8.2,5.5-13.6C162.1,13.4,163,13.8,165,14.7z M159,25c0.4,0.2,0.5,0.2,0.9,0.4 c0.7,0.3,2.2,0.9,3.7,0.6c1.1-0.2,2.2-1.1,2.9-2.5c0.7-1.4,0.5-2.7,0.1-3.4c-0.7-1.5-2.1-2.3-3.2-2.8c-0.4-0.2-0.6-0.2-0.9-0.4 C161.1,20,160.4,21.7,159,25z"
          ]
        },
        "checkpoint": {
          id: "desirability",
          points: "203.8,158.2 220.6,132.4 203.6,106.5 231.6,106.5 248.7,132.4 232.1,158.2",
          title: {
            text: "desirability",
            paths: [
              "M137.8,239.6c0.9-0.4,1.4-0.6,2.4-1c1.2-0.5,2.8-1.1,4.8-0.7c1.4,0.3,3,1.2,4,3.2c1.1,2.3,0.5,4.1-0.1,5.2 c-0.7,1.4-1.7,2.4-4,3.3c-1,0.4-1.5,0.7-2.6,1.1C140.6,246.3,139.7,244.1,137.8,239.6z M143.3,249c0.5-0.2,0.7-0.3,1.2-0.5 c1-0.4,2.3-1.1,3.1-2.6c0.6-1.1,0.8-2.5,0-4.1c-1.3-2.6-4-3.3-6.9-2c-0.5,0.2-0.7,0.3-1.1,0.5C141.1,243.7,141.8,245.5,143.3,249 z",
              "M154.8,232.5c-1.8,1-2.6,1.6-4.4,2.5c0.7,1.3,1,1.9,1.7,3.1c1.8-1,2.7-1.5,4.4-2.5c0.3,0.4,0.4,0.6,0.6,1.1 c-1.8,1.1-2.7,1.6-4.5,2.6c0.9,1.6,1.3,2.5,2.2,4.1c1.9-1.1,2.9-1.6,4.8-2.7c0.3,0.4,0.4,0.6,0.6,1.1c-2.4,1.4-3.7,2.1-6.2,3.5 c-2.3-4.2-3.4-6.4-5.6-10.6c2.3-1.2,3.4-1.8,5.6-3.2C154.4,231.9,154.5,232.1,154.8,232.5z",
              "M162.2,229c-0.3-0.2-0.8-0.3-1.1-0.3c-0.3,0-0.8,0-1.4,0.4c-1,0.7-1.4,1.8-0.8,2.7c0.3,0.4,0.5,0.5,1,0.6 c0.5,0.1,1,0,1.5-0.1c0.5-0.1,0.8-0.2,1.3-0.3c0.8-0.2,1.6-0.3,2.3-0.2c0.9,0.1,1.5,0.5,2,1.2c1.3,1.8,0.6,4.1-1.4,5.4 c-0.7,0.5-1.8,1-3,0.8c-0.9-0.1-1.7-0.6-2.2-1.1c0.4-0.4,0.6-0.6,1-1.1c0.4,0.5,1,0.8,1.5,0.9c0.8,0.1,1.4-0.1,2-0.5 c1.5-1,1.6-2.5,0.9-3.5c-0.3-0.4-0.7-0.7-1.3-0.8c-0.5-0.1-1,0.1-1.8,0.2c-0.5,0.1-0.8,0.1-1.3,0.2c-0.5,0.1-1.2,0.2-2,0.1 c-0.7-0.1-1.3-0.4-1.8-1.2c-1-1.6-0.4-3.4,1.3-4.5c0.6-0.4,1.2-0.6,1.9-0.7c0.6,0,1.2,0.1,1.8,0.4 C162.5,228.3,162.4,228.5,162.2,229z",
              "M165.3,223.9c2.9,3.8,4.3,5.7,7.2,9.6c-0.5,0.4-0.7,0.5-1.2,0.9c-2.9-3.9-4.3-5.8-7.1-9.7 C164.6,224.4,164.9,224.2,165.3,223.9z",
              "M169.3,220.7c0.6-0.5,1.6-1.3,2.7-1.4c0.9-0.1,1.9,0.1,2.8,1.1c1.2,1.4,1.1,3.3-0.3,4.6c2.6,0.6,4,0.8,6.7,1.3 c-0.5,0.5-0.8,0.7-1.4,1.2c-2.6-0.5-3.9-0.8-6.5-1.4c-0.1,0.1-0.2,0.1-0.3,0.2c1.3,1.6,2,2.4,3.3,4.1c-0.5,0.4-0.7,0.6-1.2,0.9 c-3-3.8-4.5-5.6-7.5-9.4C168.4,221.4,168.7,221.2,169.3,220.7z M172.4,225.4c0.3-0.2,0.4-0.3,0.7-0.6c1.4-1.1,1.6-2.4,0.7-3.5 c-0.4-0.5-1-0.9-1.9-0.7c-0.6,0.1-1.1,0.5-1.6,0.9c-0.3,0.2-0.4,0.3-0.6,0.5C170.7,223.4,171.3,224,172.4,225.4z",
              "M185.9,217.1c-1.6,1.6-2.4,2.4-4,3.9c0.5,1.4,0.7,2.1,1.2,3.6c-0.5,0.5-0.7,0.7-1.2,1.1c-1.5-5.4-2.4-8-4.4-13.2 c5.1,2,7.7,2.9,13.1,4.6c-0.4,0.5-0.7,0.7-1.1,1.2C188,217.9,187.3,217.6,185.9,217.1z M184.6,216.7c-2-0.7-3-1.1-4.9-1.9 c0.7,2,1.1,3,1.8,5C182.7,218.5,183.3,217.9,184.6,216.7z",
              "M184.3,206c0.4-0.5,1.3-1.4,2.4-1.7c0.5-0.1,1.5-0.2,2.6,0.7c0.5,0.4,1.2,1.1,1,2.5c1.5-1.1,3-0.7,3.9,0 c0.9,0.7,1.2,1.8,1.2,2.7c-0.1,1.3-0.9,2.3-1.5,3c-0.9,1-1.3,1.5-2.2,2.5c-3.6-3.2-5.4-4.8-8.9-8 C183.4,207,183.7,206.7,184.3,206z M187.7,210.2c0.3-0.3,0.4-0.5,0.7-0.8c0.5-0.6,1.5-2,0.1-3.2c-1.5-1.3-2.9,0.3-3.1,0.6 c-0.3,0.3-0.4,0.5-0.7,0.8C185.9,208.6,186.5,209.1,187.7,210.2z M191.8,213.8c0.4-0.5,0.7-0.8,1.1-1.3c0.6-0.7,1.1-1.3,1.1-2.1 c0.1-0.6-0.2-1.3-0.7-1.7c-0.7-0.6-1.6-0.5-2.1-0.3c-0.5,0.2-1,0.7-1.7,1.4c-0.4,0.4-0.6,0.7-1,1.1 C189.9,212.1,190.6,212.6,191.8,213.8z",
              "M189.9,199.1c3.9,2.9,5.8,4.3,9.6,7.2c-0.4,0.5-0.5,0.7-0.9,1.2c-3.8-2.9-5.7-4.4-9.5-7.3 C189.4,199.7,189.6,199.5,189.9,199.1z",
              "M192.6,195.4c3.5,2.4,5.3,3.7,8.8,6.1c0.8-1.2,1.3-1.8,2.1-3.1c0.4,0.3,0.6,0.4,1.1,0.7c-1.1,1.8-1.7,2.6-2.9,4.3 c-3.9-2.8-5.9-4.2-9.8-6.9C192.1,196.1,192.3,195.8,192.6,195.4z",
              "M196.2,189.8c4.1,2.5,6.1,3.8,10.2,6.3c-0.3,0.5-0.5,0.8-0.8,1.3c-4.1-2.6-6.1-3.8-10.2-6.4 C195.8,190.5,195.9,190.3,196.2,189.8z",
              "M200.4,185c3.8,2.1,5.7,3.1,9.4,5.2c-0.3,0.5-0.4,0.8-0.7,1.3c-3.7-2.1-5.6-3.2-9.4-5.3c-0.6,1.1-0.9,1.6-1.5,2.6 c-0.4-0.3-0.7-0.4-1.1-0.6c1.5-2.5,2.2-3.8,3.6-6.5c0.4,0.2,0.7,0.3,1.1,0.6C201.3,183.4,201,184,200.4,185z",
              "M209.1,180.3c-3.2,0.4-4.8,0.6-8,0.8c0.3-0.6,0.4-0.9,0.7-1.4c2.5-0.2,3.7-0.3,6.2-0.6c-1.4-2.1-2.1-3.2-3.6-5.2 c0.3-0.6,0.4-0.9,0.6-1.5c1.9,2.6,2.8,3.9,4.6,6.6c1.9,0.9,2.8,1.3,4.7,2.1c-0.3,0.6-0.4,0.8-0.6,1.4 C211.9,181.6,211,181.1,209.1,180.3z",
            ]
          }
        },
        "segments": [
          {
            id: "understand-identify",
            text: "identify",
            d:"M66.9,131.3c0-16.6,13.5-30.1,30.1-30.1c0,0,0,0,0,0l0.1-67.1c-25,0-49.9,9.6-68.9,28.8 c-31.6,31.8-36.6,80-15.2,117l58-33.5C68.4,141.9,66.9,136.7,66.9,131.3z",
            position: {
              x: 20,
              y: 110
            }
          },
          {
            id: "understand-immerse",
            text: "immerse",
            d:"M165.5,62.2c-19-18.8-43.7-28.2-68.4-28.1L97,101.2c16.6,0,30.1,13.5,30.1,30.1 c0,5.5-1.5,10.6-4,15l58.2,33.5C202.8,142.5,197.6,94,165.5,62.2z",
            position: {
              x: 125,
              y: 110
            }

          },
          {
            id: "understand-reframe",
            text: "reframe",
            d:"M123.1,146.3c-5.2,9-14.9,15.1-26.1,15.1c-11.1,0-20.8-6-26-15l-58,33.5 c4.2,7.3,9.5,14.2,15.8,20.4c38.1,37.8,99.6,37.5,137.4-0.6c6-6.1,11.1-12.7,15.2-19.8L123.1,146.3z",
            position: {
              x: 72,
              y: 194
            }
          }
        ]
      },
      {
        id: "create",
        title: {
          text: "create",
          paths: [
            "M332.2,19.5c-1.1,1-2.1,1.4-3,1.7c-2.7,0.8-4.7,0.6-6.4,0c-1.8-0.7-3.5-2.1-4.4-4.2c-0.9-2.1-0.6-4.4,0.4-6.1 c1-1.7,2.9-3.3,5.5-4.2c1.1-0.4,2.5-0.6,4.3-0.4c0.4,1.5,0.6,2.3,1,3.8c-1-0.5-2.5-0.9-4.2-0.4c-1.4,0.4-2.3,1.2-2.9,2.2 c-0.6,1.1-0.8,2.4-0.3,3.7c0.5,1.4,1.5,2.2,2.4,2.6c0.4,0.2,1.8,0.7,3.6,0.1c0.9-0.3,2-0.9,3-2.5C331.6,17.2,331.8,18,332.2,19.5 z",
            "M337.6,3.7c2.2-0.4,3.7,0,4.6,0.6c0.8,0.5,1.7,1.4,1.9,3.1c0.1,0.9,0,2.1-0.9,3.1c-0.5,0.6-1.2,1.1-2.1,1.4 c2.3,2.1,3.4,3.1,5.5,5.3c-1.7,0.2-2.5,0.3-4.2,0.6c-2-2-3-3-5.1-5c0.5,2.3,0.7,3.4,1.1,5.7c-1.4,0.3-2,0.4-3.4,0.8 c-1.4-5.7-2.1-8.6-3.4-14.3C333.9,4.4,335.1,4.1,337.6,3.7z M336.8,10.6c0.3-0.1,0.5-0.1,0.8-0.2c0.7-0.1,1.6-0.4,2.1-1 c0.2-0.3,0.5-0.8,0.4-1.5c-0.1-0.8-0.7-1.2-1-1.3c-0.7-0.3-1.7-0.2-2.2-0.1c-0.4,0.1-0.5,0.1-0.9,0.2 C336.3,8.2,336.5,9,336.8,10.6z",
            "M357,4.8c-2.3,0-3.4,0-5.7,0.1c0.1,1.1,0.1,1.7,0.1,2.8c2.1-0.1,3.1-0.1,5.2-0.1c0,1.1,0,1.7,0,2.9c-2,0-3.1,0-5.1,0.1 c0.1,1.3,0.1,2,0.2,3.3c2.1-0.1,3.1-0.1,5.2-0.1c0,1.1,0,1.7,0,2.9c-3.4,0-5.1,0.1-8.5,0.4c-0.5-5.8-0.8-8.8-1.3-14.6 c3.9-0.3,5.9-0.4,9.8-0.4C357,3.1,357,3.7,357,4.8z",
            "M369,14.6c-2.3-0.3-3.5-0.4-5.8-0.6c-0.5,1.1-0.8,1.6-1.3,2.7c-1.4-0.1-2.2-0.1-3.6-0.1c2.5-5.8,4-8.7,7.2-14.3 c1.5,0.1,2.2,0.2,3.7,0.4c2.1,6.1,2.9,9.2,4.2,15.5c-1.4-0.3-2.1-0.4-3.6-0.6C369.4,16.4,369.3,15.8,369,14.6z M368.3,11.9 c-0.5-2-0.8-3.1-1.5-5.1c-1,1.9-1.5,2.8-2.5,4.7C366,11.7,366.7,11.8,368.3,11.9z",
            "M382.1,7.9c-1.1,4.6-1.7,6.9-2.9,11.5c-1.4-0.3-2-0.5-3.4-0.8c1-4.6,1.5-6.9,2.4-11.6c-1.4-0.3-2.2-0.4-3.6-0.7 c0.2-1.1,0.3-1.7,0.5-2.8c4.6,0.8,6.9,1.3,11.4,2.6c-0.3,1.1-0.5,1.6-0.8,2.7C384.2,8.5,383.5,8.3,382.1,7.9z",
            "M396.8,12.8c-2.1-0.9-3.2-1.3-5.4-2.1c-0.4,1.1-0.6,1.6-0.9,2.7c2,0.7,3,1.1,5,1.9c-0.4,1.1-0.7,1.6-1.1,2.6 c-1.9-0.8-2.9-1.2-4.8-1.8c-0.4,1.2-0.6,1.8-1.1,3.1c2,0.7,3,1.1,4.9,1.9c-0.4,1.1-0.7,1.6-1.1,2.6c-3.2-1.3-4.8-1.9-8.1-2.9 c1.7-5.6,2.6-8.4,4.3-14c3.8,1.2,5.7,1.9,9.4,3.4C397.4,11.2,397.2,11.7,396.8,12.8z"
          ]
        },
        "checkpoint": {
          id: "feasibility",
          points: "463.8,157.2 480.6,131.4 463.6,105.5 491.6,105.5 508.7,131.4 492.1,157.2",
          title: {
            text: "feasibility",
            paths: [
              "M409.1,229.9c-1.6,0.8-2.4,1.1-4,1.8c0.6,1.3,0.8,2,1.4,3.3c1.6-0.7,2.4-1,4-1.8c0.2,0.5,0.3,0.7,0.5,1.1 c-1.6,0.8-2.4,1.1-4,1.8c0.9,2.2,1.4,3.3,2.3,5.5c-0.6,0.2-0.9,0.4-1.4,0.6c-1.8-4.4-2.8-6.7-4.6-11.1c2.1-0.9,3.2-1.3,5.2-2.3 C408.8,229.2,408.9,229.5,409.1,229.9z",
              "M417,225.7c-1.8,1-2.7,1.5-4.5,2.5c0.7,1.3,1,1.9,1.6,3.2c1.8-1,2.7-1.4,4.5-2.5c0.3,0.4,0.4,0.7,0.6,1.1 c-1.8,1-2.7,1.5-4.6,2.5c0.9,1.7,1.3,2.5,2.2,4.1c2-1,3-1.6,4.9-2.7c0.3,0.4,0.4,0.7,0.6,1.1c-2.5,1.4-3.7,2.1-6.3,3.4 c-2.2-4.3-3.3-6.4-5.4-10.7c2.3-1.2,3.4-1.8,5.7-3.1C416.7,225.1,416.8,225.3,417,225.7z",
              "M429.2,226.6c-1.9,1.3-2.8,1.9-4.7,3.2c0.2,1.5,0.3,2.2,0.4,3.7c-0.6,0.4-0.9,0.5-1.4,0.9c-0.4-5.6-0.7-8.4-1.7-13.8 c4.6,3,7,4.3,12,6.9c-0.5,0.4-0.8,0.6-1.4,1C431.2,227.7,430.5,227.4,429.2,226.6z M428,225.9c-1.8-1.1-2.7-1.6-4.5-2.7 c0.4,2.1,0.5,3.1,0.8,5.2C425.8,227.4,426.6,226.9,428,225.9z",
              "M433.7,215.2c-0.3-0.1-0.8-0.2-1.1-0.2c-0.3,0-0.8,0.1-1.3,0.6c-1,0.8-1.2,1.9-0.5,2.8c0.3,0.4,0.6,0.5,1,0.5 c0.5,0,1-0.1,1.5-0.3c0.5-0.2,0.8-0.2,1.3-0.4c0.8-0.3,1.5-0.5,2.3-0.4c0.9,0,1.6,0.4,2.1,1c1.5,1.7,1,4-0.9,5.6 c-0.7,0.6-1.7,1.2-2.9,1.1c-0.9,0-1.7-0.5-2.3-0.9c0.4-0.5,0.6-0.7,0.9-1.2c0.5,0.4,1.1,0.7,1.6,0.7c0.8,0,1.4-0.3,1.9-0.7 c1.4-1.2,1.3-2.6,0.5-3.6c-0.4-0.4-0.8-0.6-1.4-0.6c-0.5,0-1,0.2-1.7,0.4c-0.5,0.1-0.7,0.2-1.2,0.4c-0.5,0.2-1.2,0.4-2,0.3 c-0.8-0.1-1.4-0.3-1.9-1c-1.1-1.5-0.7-3.3,0.8-4.6c0.6-0.5,1.1-0.8,1.9-0.9c0.6-0.1,1.2,0,1.8,0.2 C433.9,214.5,433.9,214.7,433.7,215.2z",
              "M436.2,209.8c3.3,3.5,5,5.2,8.3,8.7c-0.4,0.4-0.7,0.6-1.1,1c-3.3-3.5-4.9-5.3-8.1-8.8 C435.6,210.4,435.8,210.2,436.2,209.8z",
              "M440,206c0.5-0.5,1.4-1.4,2.5-1.6c0.5-0.1,1.5-0.1,2.6,0.8c0.4,0.4,1.1,1.2,0.9,2.5c1.5-1.1,3.1-0.6,3.9,0.1 c0.9,0.8,1.2,1.9,1,2.7c-0.2,1.3-1,2.3-1.6,2.9c-0.9,1-1.4,1.5-2.4,2.4c-3.4-3.4-5.1-5.1-8.5-8.5 C439.1,206.9,439.4,206.6,440,206z M443.2,210.3c0.3-0.3,0.5-0.5,0.8-0.8c0.5-0.5,1.6-2,0.3-3.2c-1.5-1.3-2.9,0.1-3.1,0.4 c-0.3,0.3-0.4,0.5-0.8,0.8C441.5,208.6,442.1,209.2,443.2,210.3z M447.1,214.1c0.5-0.5,0.7-0.7,1.2-1.2c0.6-0.6,1.1-1.3,1.2-2.1 c0.1-0.6-0.1-1.3-0.6-1.8c-0.7-0.6-1.5-0.5-2.1-0.3c-0.5,0.2-1.1,0.6-1.8,1.4c-0.4,0.4-0.6,0.6-1,1.1 C445.3,212.3,445.9,212.9,447.1,214.1z",
              "M445.9,199.3c3.7,3,5.6,4.5,9.3,7.5c-0.4,0.5-0.6,0.7-1,1.2c-3.7-3.1-5.5-4.6-9.2-7.7 C445.4,199.9,445.6,199.7,445.9,199.3z",
              "M448.7,195.7c3.5,2.6,5.2,3.8,8.6,6.4c0.9-1.2,1.3-1.8,2.2-3c0.4,0.3,0.6,0.4,1,0.7c-1.2,1.7-1.8,2.6-3.1,4.3 c-3.8-2.9-5.7-4.4-9.6-7.3C448.2,196.3,448.4,196.1,448.7,195.7z",
              "M452.5,190.2c4,2.6,6,3.9,10.1,6.5c-0.3,0.5-0.5,0.8-0.8,1.3c-4-2.7-6-4-10-6.7C452,190.9,452.2,190.7,452.5,190.2z",
              "M456.8,185.5c3.7,2.1,5.6,3.2,9.3,5.3c-0.3,0.5-0.5,0.8-0.8,1.3c-3.7-2.2-5.6-3.3-9.3-5.4c-0.6,1.1-0.9,1.6-1.6,2.6 c-0.4-0.3-0.6-0.4-1.1-0.7c1.6-2.5,2.3-3.8,3.7-6.4c0.4,0.2,0.7,0.4,1.1,0.6C457.7,183.9,457.4,184.5,456.8,185.5z",
              "M465.5,180.8c-3.2,0.4-4.8,0.5-8,0.7c0.3-0.6,0.4-0.9,0.7-1.4c2.5-0.2,3.7-0.3,6.3-0.6c-1.4-2.1-2.1-3.2-3.5-5.2 c0.3-0.6,0.4-0.9,0.6-1.5c1.9,2.6,2.8,3.9,4.6,6.7c1.9,0.9,2.8,1.3,4.7,2.2c-0.3,0.6-0.4,0.8-0.7,1.4 C468.3,182.2,467.4,181.7,465.5,180.8z",
            ]
          }
        },
        "segments": [
          {
            id: "create-ideate",
            text: "ideate",
            d: "M325.5,131.7c0-7.6,2.8-15.2,8.6-21c5.7-5.8,13.3-8.7,20.8-8.8l1.8-67.8c-24.6,0.2-49.2,9.8-68,28.7 c-18.8,18.9-28.1,43.6-28.1,68.2L325.5,131.7z",
            position: {
              x: 290,
              y: 95
            }
          },
          {
            id: "create-build",
            text: "build",
            d: "M452.9,132.9c0.9-25.7-8.5-51.7-28.2-71.2c-18.8-18.6-43.4-27.8-68-27.6l-1.8,67.8 c7.6-0.1,15.3,2.8,21.1,8.6c5.8,5.8,8.7,13.3,8.8,20.9L452.9,132.9z",
            position: {
              x: 380,
              y: 95
            }
          },
          {
            id: "create-test",
            text: "test",
            d: "M353.9,226.5c25.6,0.6,51.4-9,70.9-28.7c17.9-18.1,27.3-41.4,28.1-64.9l-68.1-1.6c0,7.6-2.8,15.2-8.6,21 c-5.8,5.8-13.3,8.7-20.9,8.8L353.9,226.5z",
            position: {
              x: 385,
              y: 175
            }
          },
          {
            id: "create-evaluate",
            text: "evaluate",
            d: "M355.3,161.1c-7.6,0-15.2-2.8-21-8.6c-5.8-5.8-8.7-13.3-8.8-20.9l-64.9-0.6c0,24.6,9.4,49.2,28.2,67.8 c18.1,17.9,41.5,27.1,65.1,27.6L355.3,161.1z",
            position: {
              x: 285,
              y: 175
            }
          }
        ]
      },
      {
        id: "implement",
        title: {
          text: "implement",
          paths: [
            "M555.1,14.3c2.5,5.3,3.8,8,6.3,13.3c-1.3,0.6-1.9,0.9-3.2,1.6c-2.7-5.2-4-7.8-6.7-13.1C552.9,15.3,553.6,15,555.1,14.3z",
            "M563.8,26.4c-1.5-5.8-2.2-8.7-3.5-14.5c1.2-0.5,1.8-0.8,3-1.3c2.9,2.6,4.3,4,7,6.7c0.3-3.8,0.5-5.8,1-9.6 c1.2-0.4,1.9-0.6,3.1-1c2.8,5.3,4.1,8,6.6,13.3c-1.4,0.4-2,0.6-3.4,1c-1.5-3.2-2.3-4.8-3.9-8c-0.5,3.8-0.7,5.8-0.9,9.6 c-0.5,0.2-0.7,0.3-1.2,0.4c-2.7-2.8-4-4.1-6.9-6.7c0.8,3.4,1.3,5.2,2.2,8.6C565.8,25.5,565.1,25.8,563.8,26.4z",
            "M585.7,3.8c1.4-0.3,3.1-0.5,4.6,0.3c1.6,0.8,2,2.2,2.2,3.2c0.3,1.8-0.3,3-0.7,3.6c-1,1.4-2.6,1.8-3.7,2.1 c-0.9,0.2-1.3,0.3-2.2,0.5c0.5,2,0.7,3,1.2,5c-1.4,0.3-2,0.5-3.4,0.8c-1.5-5.7-2.2-8.5-3.7-14.2C582.2,4.6,583.4,4.3,585.7,3.8z  M585.3,10.8c0.5-0.1,0.8-0.2,1.3-0.3c0.5-0.1,1.4-0.3,1.8-1c0.3-0.4,0.4-0.9,0.3-1.5c-0.1-0.6-0.5-1.1-0.9-1.3 c-0.7-0.4-1.5-0.3-2.2-0.1c-0.5,0.1-0.8,0.2-1.3,0.3C584.7,8.5,584.9,9.3,585.3,10.8z",
            "M598,1.7c0.6,4.7,0.9,7,1.5,11.7c1.9-0.2,2.9-0.3,4.8-0.5c0.1,1.1,0.2,1.7,0.3,2.8c-3.3,0.3-4.9,0.5-8.1,1 c-0.9-5.8-1.4-8.7-2.3-14.5C595.7,2,596.4,1.9,598,1.7z",
            "M614.9,3.4c-2.2,0-3.3,0.1-5.5,0.2c0.1,1.1,0.1,1.7,0.1,2.8c2.1-0.1,3.1-0.1,5.1-0.2c0,1.1,0,1.7,0,2.9c-2,0-3,0.1-5,0.1 c0.1,1.3,0.1,2,0.2,3.3c2.1-0.1,3.1-0.1,5.2-0.1c0,1.1,0,1.7,0,2.9c-3.4,0-5.1,0.1-8.5,0.4c-0.4-5.9-0.7-8.8-1.1-14.6 c3.8-0.3,5.7-0.4,9.5-0.4C614.9,1.7,614.9,2.2,614.9,3.4z",
            "M617.1,15.2c1-5.9,1.6-8.8,2.8-14.6c1.3,0,1.9,0.1,3.2,0.1c1.5,3.6,2.2,5.4,3.5,9c1.8-3.4,2.8-5.1,4.9-8.4 c1.3,0.1,1.9,0.2,3.2,0.4c0.3,6,0.4,8.9,0.5,14.9c-1.4-0.2-2.1-0.3-3.5-0.5c0-3.5-0.1-5.3-0.2-8.8c-2,3.3-3,5-4.8,8.3 c-0.5,0-0.7-0.1-1.2-0.1c-1.3-3.6-1.9-5.4-3.4-9c-0.7,3.5-1,5.2-1.6,8.7C619.2,15.2,618.5,15.2,617.1,15.2z",
            "M649,7.3c-2.2-0.5-3.2-0.8-5.4-1.2c-0.2,1.1-0.3,1.7-0.6,2.8c2,0.4,3,0.6,5,1.1c-0.3,1.1-0.4,1.7-0.7,2.8 c-2-0.5-3-0.7-4.9-1.1c-0.3,1.3-0.4,1.9-0.6,3.2c2,0.4,3,0.6,5.1,1.1c-0.3,1.1-0.4,1.7-0.7,2.8c-3.3-0.8-5-1.2-8.4-1.7 c1-5.8,1.5-8.7,2.5-14.5c3.8,0.6,5.6,1,9.4,1.9C649.4,5.6,649.3,6.2,649,7.3z",
            "M649,19.5c1.5-5.7,2.3-8.5,3.8-14.2c1.3,0.3,2,0.5,3.3,0.9c2.5,4.7,3.6,7,5.6,11.8c1.3-3.6,1.9-5.3,3.2-8.9 c1.5,0.5,2.2,0.8,3.7,1.4c-2.2,5.5-3.2,8.2-5.4,13.7c-1.1-0.5-1.7-0.7-2.9-1.1c-1.8-4.7-2.8-7.1-5.2-11.7 c-1.1,3.6-1.6,5.5-2.7,9.1C651,20,650.3,19.8,649,19.5z",
            "M676.2,17c-2,4.3-3.1,6.4-5.1,10.7c-1.3-0.6-1.9-0.9-3.2-1.5c1.9-4.3,2.9-6.5,4.8-10.8c-1.3-0.6-2-0.9-3.4-1.4 c0.4-1.1,0.7-1.6,1.1-2.6c4.2,1.7,6.3,2.7,10.4,4.8c-0.5,1-0.8,1.5-1.3,2.5C678.2,17.9,677.6,17.6,676.2,17z"
          ]
        },
        "checkpoint": {
          id: "viability",
          points: "726.3,158.2 743.1,132.4 726.1,106.6 754.1,106.6 771.2,132.4 754.6,158.2",
          title: {
            text: "viability",
            paths: [
              "M680.1,221.9c2.9,2.6,4.5,3.9,7.6,6.3c-0.5-4-0.8-5.9-1.5-9.8c0.5-0.3,0.8-0.5,1.3-0.8c1.1,5.4,1.5,8.1,2,13.7 c-4.5-3.3-6.7-5-10.8-8.7C679.3,222.3,679.6,222.2,680.1,221.9z",
              "M690.2,215.8c2.7,3.9,4.1,5.9,6.9,9.9c-0.5,0.4-0.8,0.5-1.3,0.9c-2.7-4-4-6-6.7-10C689.5,216.3,689.7,216.1,690.2,215.8z ",
              "M703.7,216.1c-1.7,1.5-2.6,2.3-4.4,3.7c0.3,1.5,0.5,2.2,0.7,3.7c-0.6,0.4-0.8,0.6-1.4,1c-0.9-5.6-1.5-8.3-2.9-13.7 c4.9,2.5,7.5,3.6,12.7,5.5c-0.5,0.5-0.8,0.7-1.3,1.2C705.8,217,705.1,216.7,703.7,216.1z M702.5,215.6c-1.9-0.9-2.9-1.3-4.8-2.2 c0.6,2,0.8,3.1,1.3,5.1C700.4,217.3,701.1,216.7,702.5,215.6z",
              "M703.1,204.9c0.5-0.5,1.4-1.3,2.5-1.5c0.5-0.1,1.5-0.1,2.6,0.8c0.4,0.4,1.1,1.2,0.9,2.5c1.5-1.1,3.1-0.6,3.9,0.1 c0.9,0.8,1.1,1.9,1,2.8c-0.2,1.3-1,2.3-1.7,3c-1,1-1.5,1.5-2.4,2.5c-3.4-3.4-5-5.2-8.4-8.6C702.1,205.8,702.4,205.5,703.1,204.9z M706.2,209.2c0.3-0.3,0.5-0.5,0.8-0.8c0.5-0.5,1.7-2,0.3-3.2c-1.5-1.3-2.9,0.1-3.1,0.4c-0.3,0.3-0.5,0.5-0.8,0.8 C704.5,207.5,705.1,208.1,706.2,209.2z M710.1,213.1c0.5-0.5,0.7-0.8,1.2-1.3c0.6-0.6,1.2-1.3,1.3-2.1c0.1-0.6-0.1-1.3-0.6-1.8 c-0.7-0.6-1.5-0.5-2.1-0.3c-0.5,0.2-1.1,0.6-1.8,1.4c-0.4,0.4-0.6,0.6-1.1,1.1C708.3,211.3,708.9,211.9,710.1,213.1z",
              "M709,198.2c3.8,3,5.6,4.5,9.4,7.5c-0.4,0.5-0.6,0.7-1,1.2c-3.7-3-5.6-4.6-9.3-7.6C708.4,198.8,708.6,198.6,709,198.2z",
              "M711.7,194.5c3.5,2.5,5.2,3.8,8.7,6.3c0.9-1.2,1.3-1.9,2.2-3.1c0.4,0.3,0.6,0.4,1.1,0.7c-1.2,1.8-1.8,2.7-3.1,4.4 c-3.9-2.9-5.8-4.3-9.7-7.1C711.2,195.2,711.4,195,711.7,194.5z",
              "M715.4,189c4.1,2.5,6.2,3.7,10.3,6.2c-0.3,0.5-0.5,0.8-0.8,1.3c-4.1-2.6-6.1-3.8-10.2-6.4 C714.9,189.7,715.1,189.5,715.4,189z",
              "M719.5,184.2c3.8,2,5.7,3,9.6,4.9c-0.3,0.6-0.4,0.8-0.7,1.4c-3.8-2-5.7-3-9.5-5.1c-0.6,1.1-0.9,1.6-1.5,2.7 c-0.4-0.3-0.7-0.4-1.1-0.6c1.5-2.6,2.2-3.9,3.4-6.6c0.5,0.2,0.7,0.3,1.1,0.5C720.4,182.5,720.1,183.1,719.5,184.2z",
              "M728,179c-3.2,0.6-4.8,0.8-8,1.2c0.3-0.6,0.4-0.9,0.7-1.5c2.5-0.3,3.7-0.5,6.2-0.9c-1.5-2.1-2.3-3.1-3.8-5 c0.2-0.6,0.3-0.9,0.5-1.5c2.1,2.5,3.1,3.7,5,6.4c1.9,0.8,2.9,1.1,4.8,1.9c-0.2,0.6-0.3,0.9-0.6,1.5 C730.9,180.1,730,179.8,728,179z",
            ]
          }
        },
        "segments": [
          {
            id: "implement-organize",
            text: "organize",
            d: "M587.8,124c3.7-12.1,15-20.9,28.3-20.9l0.3-68.9c-43,0-79.4,28.5-91.5,67.8L587.8,124z",
            position: {
              x: 545,
              y: 85
            }
          },
          {
            id: "implement-brand",
            text: "brand",
            d: "M707.4,100c-12.7-38.3-48.6-65.9-90.9-65.9l-0.3,68.9c12.3,0,22.8,7.5,27.3,18.1L707.4,100z",
            position: {
              x: 635,
              y: 85
            }
          },
          {
            id: "implement-fund",
            text: "fund",
            d: "M676.3,206.1c22-17.7,36-44.9,36-75.4c0-10.7-1.7-21-4.9-30.6l-63.9,21.1c1.5,3.5,2.3,7.4,2.3,11.5 c0,10-5,18.8-12.5,24.2L676.3,206.1z",
            position: {
              x: 655,
              y: 155
            }
          },
          {
            id: "implement-test",
            text: "test",
            d: "M633.2,156.9c-4.8,3.4-10.7,5.4-17.1,5.4c-7.2,0-13.8-2.6-19-6.9l-40.6,50.6 c16.4,13.2,37.2,21.1,59.8,21.1c22.6,0,43.4-7.9,59.8-21.1L633.2,156.9z",
            position: {
              x: 605,
              y: 200
            }
          },
          {
            id: "implement-evaluate",
            text: "evaluate",
            d: "M597.2,155.4c-6.5-5.4-10.7-13.6-10.7-22.8c0-3,0.5-6,1.3-8.7l-62.9-22c-2.8,9.1-4.3,18.7-4.3,28.7 c0,30.5,14.1,57.7,36,75.4L597.2,155.4z",
            position: {
              x: 530,
              y: 155
            }
          }
        ]
      }
    ];

    return (
      <svg
        version="1.1"
        x="0px"
        y="0px"
        viewBox="0 0 771.2 250.9">
        {phases.map(function(phase) {
          return (
            <Phase
              key={phase.id}
              id={phase.id}
              openModal={this.props.openModal}
              segments={phase.segments}
              title={phase.title} />
          );
        }.bind(this))}
        {phases.map(function(phase, idx) {
          return (
            <Checkpoint key={idx} checkpoint={phase.checkpoint} />
          );
        })}
      </svg>
    );
  }
});


var Resource = React.createClass({
  render: function() {
    if (this.props.url) {
      return (
        <li className="resource">
          <h4>
            <a
              target="_blank"
              href={ this.props.url }>{ this.props.title }</a>
          </h4>
        </li>
      );
    } else {
      return (
        <li className="resource">
          <h4>{ this.props.title }</h4>
        </li>
      );
    }
  }
});

var ResourceList = React.createClass({
  renderList: function() {
    return (
      <ul className="resource-list">
        {this.props.resources.map(function(resource, idx) {
          if (resource.items) {
            return (
              <ResourceList
                key={idx}
                title={resource.title}
                resources={resource.items} />
            );
          } else {
            return <Resource key={idx} title={resource.title} url={resource.url} />
          }
        })}
      </ul>
    );
  },

  render: function() {
    var subListTitle = null;
    if (this.props.title) {
      return (
        <div>
          <Resource title={this.props.title} url="" />
          { this.renderList() }
        </div>
      );
    } else {
      return this.renderList();
    }
  }
})

var Modal = React.createClass({
  render: function() {
    var cls = "modal " + this.props.id;
    if (this.props.isOpen) {
      cls += " open";
    }
    return (
      <div className={cls}>
        <div className="modal-content">
          <div className="title">
            <h2>{this.props.title}</h2>
            <a
              className="close-button"
              onClick={this.props.onRequestClose}>x</a>
          </div>
          <div className="inner">
            <ResourceList resources={this.props.resources} />
          </div>
        </div>
        <div
          onClick={this.props.onRequestClose}
          className="modal-overlay"></div>
      </div>
    );
  }
});

var App = React.createClass({
  getInitialState: function() {
    return {
      isOpen: false,
      modalTitle: "",
      modalId: "",
      resources: []
    };
  },

  close: function() {
    this.setState({
      isOpen: false
    });
  },

  open: function(title, id) {
    this.setState({
      isOpen: true,
      modalTitle: title,
      modalId: id
    });
    var request = new XMLHttpRequest();
    request.open('GET', '/resources/' + id, true);

    request.onload = function() {
      if (request.status >= 200 && request.status < 400) {
        var data = JSON.parse(request.responseText);
        this.setState({
          resources: data.resources
        });
      } else {
        this.setState({isOpen: False});
        console.log("HTTP Error: ", request.error);
      }
    }.bind(this);

    request.onerror = function(e) {
      // There was a connection error of some sort
      this.setState({isOpen: False});
      console.log("Connection Error: ", e);
    };

    request.send();
  },

  render: function() {
    return (
      <div>
        <DesignRoadmapSvg openModal={this.open} />
        <Modal
          title={this.state.modalTitle}
          id={this.state.modalId}
          isOpen={this.state.isOpen}
          onRequestClose={this.close}
          resources={this.state.resources} />
      </div>
    );
  }
});

React.render(
  <App />,
  document.getElementById('container')
);
